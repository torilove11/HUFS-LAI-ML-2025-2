# Project: 영수증 사진 기반 가계부 자동 생성 봇

## 1. 해결하고자 하는 문제
- 지출이 어디로 새는지 매달 정리하기 어렵고, 가계부를 작성하지 않으면 과소비를 하는 경우가 빈번하게 발생하게 됩니다.
  이를 예방하기 위해 가계부를 작성해보고자 하였지만, 일일이 영수증을 수동 입력하는 데 시간이 많이 들고 귀찮다보니 늘 가계부 작성을 포기하게 되었습니다. 
- **목표**: 영수증 사진을 업로드하면 상호/일시/금액을 자동 추출하고, 카테고리를 분류하여 주/월 지출 리포트를 자동 생성해 가계부를 작성해주는 봇을 만들어볼 계획입니다.
- **실사용 계획**: 직접 2주 동안 최소 10회 이상 사용하고, 주 1회 리포트를 확인해볼 계획입니다.

## 2. 생각해본 솔루션 
- 디스코드 DM으로 영수증 사진을 업로드하면,
  1) 전처리(기울기/노이즈 보정) → 2) OCR(Tesseract, kor+eng) →
  3) 키워드 기반 파싱(“합계/부가세/승인/사업자등록번호” 등) →
  4) 카테고리 분류(사전 매핑 + ML 분류기) →
  5) DB 저장 및 `/report`로 주/월 요약, `/budget`으로 예산 관리.
- **핵심 기능**  
  - 이미지 업로드 → 상호/일시/합계 추출 → 카테고리 자동 분류(식비/카페/교통/마트/기타)  
  - `/report week|month` 요약, `/setcat {id} {카테고리}`로 즉시 수정 반영  
  - 개인정보(카드번호·전화번호)는 저장 전 마스킹 처리

## 3. ML 활용 계획
- OCR로 추출한 텍스트를 정규화하고 영수증 최대한 많이 수집·라벨링해 카테고리(식비/카페/교통/마트편의/문화여가/기타) 데이터셋을 구축
- 상호명·품목 문자 n-gram TF-IDF와 금액·시간대 메타 특성을 사용해 로지스틱 회귀(필요 시 SVM 비교)로 분류 모델을 학습하고, 5-fold Cross Validation의 Macro F1로 성능을 평가

## 4. 사용 시나리오
- 매 결제 후 영수증을 촬영하여 DM으로 전송 → 봇이 파싱 결과 카드로 회신  
- 매주 일요일 저녁 `/report week`로 요약 확인, 예산 초과 예상 시 알림 수신

## 5. 위험 요소 예상 및 대응 방안
- 스캔 품질 저하 → 스캐너 앱 권장/전처리(감마, 이진화)  
- 양식 다양성 → 키워드 주변 탐색 + 규칙 보강, 실패 시 사용자 확인 흐름  
- 개인정보 → 숫자패턴 마스킹(카드/전화/사업자번호), 원본 이미지는 선택적으로 즉시 삭제


